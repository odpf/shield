rules:
  - backends:
      - name: potato
        target: "http://{{.host}}:{{.port}}"
        prefix: "/api"
        frontends:
          - name: ping
            path: "/api/ping"
            method: "GET"
          - name: create_resource
            path: "/api/resource"
            method: "POST"
            hooks:
              - name: authz
                config:
                  action: authz_action
                  attributes:
                    resource:
                      key: X-Shield-Name
                      type: header
                      source: request
                    project:
                      key: X-Shield-Project
                      type: header
                      source: request
                    user:
                      key: X-Shield-User
                      type: header
                      source: request
                    resource_type:
                      key: X-Shield-Resource-Type
                      type: header
                      source: request